## 2.1 关系及其相关概念
### 一、关系模型提出
- 1970年，IBM的研究员E.F.Codd博士在刊物《Communication of the ACM》上发表了一篇关于数据库模型的学术论文（篇名为“A Relational Model of Data for Large Shared Data Banks’），首次提出了关系模型概念及其原理方法。
- 后来Codd又陆续发表多篇文章，论述了范式理论和衡量关系模型的12条标准，进一步奠定了关系数据库的数学理论基础。
### 二、实体、关系的概念
1. #实体 （entity）是指包含有数据特征的事物对象在概念模型世界中的抽象名称。
2. #关系 （relation）是指具有关系特征、用于存放实体数据的二维表。关系也常被称为 #关系表 。在关系模型中，使用关系来存储实体中的数据。
3. 关系特征
	- 表中每行存储实体的一个实例数据
	- 表中每列包含实体的一项属性数据
	- 表中单元格只能存储单个值
	- 不允许有重复的行
	- 不允许有重复的列
	- 列顺序可任意
	- 行顺序可任意
### 三、关系的数学定义
#关系 是指在 集合域 $D_1,D_2,...,D_n$上运算[[4.1 关系的概念与笛卡尔集#^82516f|笛卡尔积]]的有意义子集，其数学描述为$R\subseteq D_1\times D_2\times ...\times D_n$。其中每一个 #向量 （$d_1,d_2,...,d_n$）称为一个 #n元组 ，简称 #元组 。向量中的每个di称为 #分量 。若集合域$D_i(i=1,2,...,n)$为有限集，每个域的 #基数 为$mi(i=1,2,...,n)$，则笛卡尔积$D_1\times D_2\times ...\times D_n$的基数M为：$\prod_{i=1}^{n}m_i$。
说明：关系R只是该笛卡尔积的有意义子集，即关系R的元组数<=笛卡尔积的元组数。
### 四、关系的键定义
1. 在关系中，可以用来唯一标识元组的属性列，称为 #键 （Key），其它属性列都非键列。
	1. #复合键 （Compound Key）是指关系中用来唯一标识元组的多列作为键。 ^7ef9a5
	2. #候选键 （Candidate Key）关系中可能有多个列均适合作为键，将其中每个都称为候选键。
	3. #主键 （Primary Key）是关系表中最有代表性的一个候选键，每个关系表中只能定义一个主键。主键作用：
		- 唯一标识关系表的每行（元组）
		- 与关联表的外键建立联系，实现关系表之间连接
		- 数据库文件使用主键值来组织关系表的数据存储
		- 数据库使用主键索引快速检索数据
	4. #代理键 采用DBMS自动生成的数字序列作为关系表的主键。由DBMS自动生成的数字序列作为主键，可替代复合主键，以便获得更高性能的数据访问操作处理。 ^ec2919
### 五、关系模式语句表示
关系模式语句中主键表示方法：`关系名(主键属性,属性2,...,属性n)`
## 2.2 关系模型原理
### 一、关系模型及其组成
#关系模型 （Relation Model）是一种基于二维表结构存储数据实体及实体间联系的数据模型。
1. 数据结构：二维表为一个实体，每行为一个元组，每列为一种属性
2. 数据操作包括集合运算操作和专门关系操作
	- 集合运算操作包括 #选择 (select)、 #投影 (project)、 #连接 (join)、 #交(intersection)、 #并 (union)、 #差 (difference)等。
	- 专门针对元组的关系操作包括数据行 #插入(Insert)、 #修改 (Update)、 #删除 (Delete)操作。
3. 在关系模型中， #数据关系约束 是指关系表中实体数据完整性、关联表之间数据一致性等要求，一般由业务需求来确定。在关系模型中，可定义关系表的数据约束如下：
	- 属性列取值类型
	- 属性列取值范围
	- 属性列取值是否唯一
	- 属性列是否允许空值
	- 关联表的参照完整性约束
### 二、关系模型数据操作
关系模型数据操作采用基于关系代数的数据操作，包括传统的集合运算操作和专门的关系运算操作。设有两个集合R、S：
1. #关系并运算 $\cup$的结果集是由属于R或属于S的所有元组组成。$R\cup S={t|t\in R\lor t\in S}$
2. #关系差运算 -的结果集是由数据R，而不属于S的所有元组组成。$R-S={t|t\in R\land t\notin S}$
3. #关系交运算 $\cap$的结果集是由既属于R又属于S的所有元组组成。$R\cap S={t|t\in R\land t\in S}$
4. #关系笛卡尔积 $\times$的结果集是由所有数据R的元组与所有数据S的元组进行组合而成。$R\times S={(d1,d2)|d1\in R,d2\in S}$
### 三、关系模型完整性
#关系模型完整性 是指在关系数据模型中对关系实施的完整性约束。完整性约束的作用：消除关系表的元组重复存储、保持关联表的数据一致性、实现业务数据规则。关系模型完整性约束组成：实体完整性约束、参照完整性约束、用户自定义完整性约束。
1. #实体完整性 是指在关系表中实施的主键取值约束，以保证关系表中每个元组可以被唯一标识。实体完整性约束规则：
	1. 每个关系表中的主键属性列都不允许为 #空值 ( #NULL)，否则就不可能标识实体。
	2. 现实世界中的实体是靠主键来标识，主键取值应该唯一，并区分关系表中的每个元组。
2. #参照性完整 是指关系表之间需要遵守的数据约束，以保证关系之间关联列的数据一致性。
	1. #参照完整性约束规则 若关系R中的外键F与关系S中的主键K相关联，则R中外键F值必须与S中主键K值一致。
	2. #外键 (Foreign key)在关联的两个关系中，它们具有一个或多个相同属性。若关联列在第一个关系中作为主键，则在第二个关系中作为外键。
3. #用户自定义完整性 是指用户根据具体业务对数据处理规则要求所定义的数据约束。用户可以定义如下类型的完整性约束：
	- 定义列的数据类型与取值范围
	- 定义列的缺省值
	- 定义列是否允许取空值
	- 定义列取值唯一性
	- 定义列之间的数据依赖性
## 2.3 PostgreSQL数据库关系操作实践


