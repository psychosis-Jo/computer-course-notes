<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>7&period;1 NoSQL&#x6570;&#x636e;&#x5e93;&#x6982;&#x8ff0;</title>
  <link rel="stylesheet" href="..\markdown.css">

</head>

<body class="vscode-body vscode-light">
  <div class="container">
    <h2 id="71-nosql数据库概述">7.1 NoSQL数据库概述</h2>
    <h3 id="一关系数据库局限">一、关系数据库局限</h3>
    <ul>
      <li>不能直接管理非结构化数据</li>
      <li>受单机服务器限制难以支持数据库高并发读写访问</li>
      <li>受磁盘容量限制不能满足海量数据的高效存储和处理</li>
      <li>实现分布式数据库的高扩展性、高可用性比较复杂</li>
    </ul>
    <h3 id="二互联网时代数据处理需求">二、互联网时代数据处理需求</h3>
    <ul>
      <li>对各类数据（结构化、半结构化、非结构化数据）管理</li>
      <li>大量用户同时访问应用要求数据库支持高并发读写访问</li>
      <li>信息化社会每时每刻都产生大量数据需要数据库高效存储</li>
      <li>信息服务系统连续运行要求数据库具有高扩展性和高可用性</li>
    </ul>
    <h3 id="三大数据管理">三、大数据管理</h3>
    <p>大数据 （big
      data），指无法在一定时间范围内用常规软件工具进行捕捉、管理和处理的数据集合。特点为：大量(Volume)、高速(Velocity)、多样(Variety)、真实(Varacity)和低价值(Value)。</p>
    <ol>
      <li>大数据处理挑战
        <ol>
          <li>数据类型多样性与异构性</li>
          <li>海量数据存储访问高速性</li>
          <li>数据处理的时效性</li>
          <li>数据的安全与隐私保护</li>
          <li>大数据的能耗问题</li>
          <li>大数据管理易用性</li>
        </ol>
      </li>
      <li>大数据存储
        <ul>
          <li>大数据存储的关键技术包括分布式存储、数据一致性和可用性、负载均衡、容错机制、虚拟存储技术、云存储技术等。</li>
          <li>要求在分布式数据库的基础上，具有更高的数据访问速度；更强的可扩展性；更高的并发访问量。</li>
          <li>在可用性、一致性、高并发、高容量等方面达到平衡。</li>
        </ul>
      </li>
    </ol>
    <h3 id="四nosql数据库">四、NoSQL数据库</h3>
    <ol>
      <li>NoSQL(Not only SQL Database)数据库是指一类非关系型、开源代码、具有水平扩展能力的分布式数据库。
        <ul>
          <li>支持非结构化数据存储，不用预先定义模式</li>
          <li>分布式集群架构，无共享结构</li>
          <li>弹性可扩展，可动态增减数据库节点</li>
          <li>数据分区存储，各分区节点并发访问</li>
          <li>节点之间数据异步复制，实现最终数据一致性</li>
          <li>数据处理遵循BASE特性原则</li>
        </ul>
      </li>
      <li>BASE特性
        <ul>
          <li>Basically Available( #基本可用)，允许数据库系统某些部分出现故障，其余部分能够继续运行，一直提供服务。</li>
          <li>Soft state( #软状态)，允许数据库系统存在暂时的数据不一致，经过纠错处理，系统数据最终保持一致态。</li>
          <li>Eventual Consistency( #最终一致性)，系统数据在某个时刻达到最终一致性。</li>
        </ul>
      </li>
      <li>数据库一致性
        <ul>
          <li>强一致性 无论更新操作在哪个副本执行，数据复制是同步的，之后所有数据库节点都能获得最新的数据。</li>
          <li>弱一致性 数据更新在一个数据库节点执行，但数据复制是异步执行的，需要经过一定时间才能达到不同数据库节点数据一致。</li>
          <li>最终一致性 弱一致性的一种特例，保证用户最终能够读取到某操作对系统特定数据的更新。</li>
        </ul>
      </li>
      <li>最终一致性的形式
        <ul>
          <li>因果一致性 如果节点A在更新完某个数据后通知了节点B，那么节点B之后对该数据的访问和修改都是基于A更新后的值。与节点A无因果关系的节点C的数据访问则没有这样的限制。</li>
          <li>读一致性 当用户更新一个数据项后，它总是访问到更新过的值，但不保证其它用户都能读取到更新数据。</li>
          <li>会话一致性 将读取存储系统的进程限定一个会话范围内，只要会话存在，就可以保证读一致性。</li>
          <li>单调读一致性 如果一个节点从系统中读取出一个数据项的某个值后，那么系统对于该节点后续的任何数据访问都不应该返回更旧的值。</li>
          <li>单调写一致性 系统能够保证来自同一个节点的写操作被顺序地执行。</li>
        </ul>
      </li>
      <li>典型NoSQL数据库比较</li>
    </ol>
    <table>
      <thead>
        <tr>
          <th>分类</th>
          <th>典型数据库</th>
          <th>应用场景</th>
          <th>数据模型</th>
          <th>优点</th>
          <th>缺点</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>键值存储数据库</td>
          <td>Redis，Voldemort，Oracle BDB</td>
          <td>主要用于处理大量数据的高性能访问负载，也用于一些日志系统等。</td>
          <td>key-value键值对，通常采用hash table来实现</td>
          <td>查找速度快</td>
          <td>数据无结构化，通常只被当作字符串或二进制数据</td>
        </tr>
        <tr>
          <td>列存储数据库</td>
          <td>HBase，Cassandra，Riak</td>
          <td>分布式联机事务处理系统</td>
          <td>以列簇式存储，将同一列数据存在一起</td>
          <td>查找速度快，可扩展性强，容易进行分布式扩展</td>
          <td>功能相对局限，不适合随机的更新</td>
        </tr>
        <tr>
          <td>文档存储数据库</td>
          <td>MongoDB，CouchDB</td>
          <td>Web应用</td>
          <td>Key-Value对应的键值对，Value为版本化文档</td>
          <td>数据结构要求不严格，表结构可变，不需要像关系型数据库一样预先定义表结构</td>
          <td>查询性能不高，而且缺乏统一的查询语法</td>
        </tr>
        <tr>
          <td>图存储数据库</td>
          <td>Neo4J，InfoGrid，Infinite Graph</td>
          <td>社交网络，推荐系统等</td>
          <td>图结构</td>
          <td>利用图结构相关算法进行快速查找，比如最短路径寻址，N度关系查找等</td>
          <td>需要对整个图做计算才能得出需要的信息，而且这种结构不容易实现分布式的集群方案</td>
        </tr>
      </tbody>
    </table>
    <ol start="6">
      <li>
        <p>NoSQL数据库整体框架</p>
        <p><img src="../img/13_NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B4%E4%BD%93%E6%A1%86%E6%9E%B6.png"
            alt="NoSQL数据库整体框架"></p>
      </li>
      <li>
        <p>NoSQL数据库优点</p>
        <ul>
          <li>可扩展性高</li>
          <li>分布式计算</li>
          <li>低成本</li>
          <li>架构灵活</li>
          <li>没有复杂的关系</li>
        </ul>
      </li>
      <li>
        <p>NoSQL数据库缺点</p>
        <ul>
          <li>缺乏通用性</li>
          <li>不支持SQL查询功能</li>
          <li>不支持事务特性</li>
          <li>系统安全特性欠缺</li>
        </ul>
      </li>
      <li>
        <p>NoSQL数据库适合的应用场景</p>
        <ul>
          <li>解决传统关系型数据库无法解决的数据存储及访问问题</li>
          <li>解决大数据多样性、异构性、高速性等数据存储与处理问题</li>
          <li>解决互联网海量非结构化数据管理与应用问题</li>
        </ul>
      </li>
      <li>
        <p>NoSQL数据库与关系型数据库比较</p>
        <ul>
          <li>NoSQL数据库采用非结构化数据存储模型，关系数据库采用结构化数据存储模型</li>
          <li>NoSQL数据库采用分布式部署，关系型数据库采用集中式部署</li>
          <li>NoSQL数据库编程遵循BASE原则，关系型数据库编程遵循ACID事务原则</li>
          <li>NoSQL数据库没有统一的数据操作标准，关系型数据库遵循SQL数据操作标准</li>
          <li>NoSQL数据库支持海量数据存储，关系数据库数据存储受限于TB级别</li>
        </ul>
      </li>
    </ol>
    <h3 id="五分布式数据库">五、分布式数据库</h3>
    <ol>
      <li>分布式数据库 由位于不同地点的数据库服务器通过网络连接，组织管理一个逻辑上集中、物理上分布的大型数据库。
        <ul>
          <li>分布式数据库优点
            <ul>
              <li>具有灵活的体系结构</li>
              <li>适应分布式的管理和控制机构</li>
              <li>系统的可靠性高、可用性好</li>
              <li>局部应用的响应速度快</li>
              <li>可扩展性好，易于集成现有系统</li>
            </ul>
          </li>
          <li>分布式数据库缺点
            <ul>
              <li>系统通信开销大</li>
              <li>系统存取结构复杂</li>
              <li>数据安全性和保密性较难处理</li>
            </ul>
          </li>
          <li>分布式数据库会出现数据不一致的情况：
            <ul>
              <li>数据库节点故障</li>
              <li>通信网络出现故障</li>
              <li>两阶段提交过程中出现问题</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>分布式数据库系统 #CAP 理论
        <ul>
          <li>一致性（Consistency）：不同节点数据库保持一致</li>
          <li>可用性（Availablility）：数据访问请求随时可满足</li>
          <li>分区容忍性（Partition Tolerance）：当出现故障节点，系统仍能响应数据访问请求</li>
        </ul>
      </li>
      <li>CAP定理法则：一个分布式系统不可能同时满足一致性、可用性和分区容错性这三个基本需求，最多只能同时满足其中两项。
        <ol>
          <li>满足C和A
            <ul>
              <li>满足C（一致性）需要所有服务器节点的数据都一样，这就要求数据在不同服务器节点进行复制同步。</li>
              <li>数据复制同步需要足够时间才能完成。节点越多，数据复制同步时间就越长。</li>
              <li>由于需要同时满足A，同步时间必须在足够短才行。因此，系统的服务器节点数就不能太多了，即P就难以满足了。</li>
            </ul>
          </li>
          <li>满足C和P
            <ul>
              <li>满足P需要很多服务器，同时还需满足C，即需保证每台及其的数据都一样，那么数据同步的时间可能需要很长。</li>
              <li>在这种情况下，难以保证用户随时访问每台服务器获取到的数据都是最新的。想要获取最新数据，必须等全部服务器数据同步完成，但其等待时间早已超出A要求的时间。</li>
            </ul>
          </li>
          <li>满足A和P
            <ul>
              <li>满足P需要有很多相同数据副本的服务器，同时还需满足A短时间内实现数据访问。难以解决不同服务器节点的数据一致性。</li>
            </ul>
          </li>
          <li>CAP模型方案选择
            <ul>
              <li>CA：放弃分区容错性，保证一致性和可用性，即传统的单机数据库处理方式</li>
              <li>AP：放弃强一致性，追求分区容错性和可用性，这是很多分布式系统设计时的选择。一些电商系统采用此方案。</li>
              <li>CP：放弃可用性，追求一致性和分区容错性。很多NoSQL系统采用此方案。</li>
            </ul>
          </li>
        </ol>
      </li>
    </ol>
    <h2 id="72-列存储数据库原理">7.2 列存储数据库原理</h2>
    <h3 id="一列存储模型">一、列存储模型</h3>
    <ol>
      <li>列存储模型
        <ul>
          <li>一种纵向切分数据的方式，不同列会放到不同的磁盘存储位置</li>
          <li>对于稀疏表（空值较多），其存储效率较高</li>
          <li>以列为单位进行数据读写</li>
          <li>在切片内一般会按行键进行排序，以加快分布式检索速度。</li>
        </ul>
      </li>
      <li>列存储数据库与关系数据
        <ol>
          <li>关系数据库
            <ul>
              <li>按行存储，每行数据存放在一个磁盘数据块</li>
              <li>需读取数据表所有的数据磁盘块，时间长</li>
            </ul>
          </li>
          <li>列存储数据库
            <ul>
              <li>按列存储，每列数据放到一个数据块中</li>
              <li>只需读取数据表的指定数据磁盘块，时间短</li>
            </ul>
          </li>
        </ol>
      </li>
    </ol>
    <h3 id="二hbase数据库介绍">二、HBASE数据库介绍</h3>
    <ol>
      <li>
        <p><a href="https://hbase.apache.org/book.html">HBase</a>全称是Hadoop
          Database，是一个构建在Hadoop大数据平台上的列存储数据库。是一个开源的非关系型分布式数据库，用于存储海量非结构化与半结构化数据。Hbase建立在HDFS上，具有自动故障转移、自动分区、水平扩展等特性。</p>
      </li>
      <li>
        <p>Hadoop生态系统</p>
        <p><img src="../img/14_Hadoop%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F.png" alt="Hadoop生态系统"></p>
        <ul>
          <li><strong>Hadoop Common</strong>：Hadoop体系最底层的一个模块，为Hadoop各子项目提供各种工具，如：配置文件和操作日志等。</li>
          <li><strong>Avro</strong>：用来做Hadoop的RPC，使Hadoop的RPC模块通信速度更快、数据结构更紧凑。</li>
          <li><strong>HBase</strong>：基于Hadoop Distributed File System，是一个开源的，基于列存储模型的分布式数据库。</li>
          <li><strong>HDFS</strong>：分布式文件系统。</li>
          <li><strong>Hive</strong>：Hive是基于Hadoop分布式计算平台上提供data
            warehouse的sql功能的一套软件。使得存储在Hadoop里面的海量数据汇总，即查询简单化。hive提供了一套QL的查询语言，以SQL为基础，使用方便。</li>
          <li><strong>MapReduce</strong>：实现了分布式计算编程框架。</li>
          <li><strong>Pig</strong>：是SQL-like语言，是在MapReduce上构建的一种高级查询语言，把一些运算编译进MapReduce模型的Map和Reduce中，并且用户可以定义自己的功能。
          </li>
          <li>
            <strong>ZooKeeper</strong>：是一个针对大型分布式系统进行协调的软件组件，提供的功能包括：配置维护、名字服务、分布式同步、组服务等。ZooKeeper的目标就是封装好复杂易出错的关键服务，将简单易用的接口和性能高效、功能稳定的系统提供给用户。
          </li>
        </ul>
      </li>
    </ol>
    <h3 id="三hbase数据库与关系数据库区别">三、HBASE数据库与关系数据库区别</h3>
    <table>
      <thead>
        <tr>
          <th></th>
          <th>HBase</th>
          <th>RDBMS</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>数据类型</td>
          <td>只有字符串</td>
          <td>较丰富的数据类型</td>
        </tr>
        <tr>
          <td>数据操作</td>
          <td>简单操作，读（get）、写（put）、删除（delete）、扫描（scan）</td>
          <td>SQL语言各种操作</td>
        </tr>
        <tr>
          <td>存储模式</td>
          <td>基于列存储，每个列族都由几个文件保存，不同列族的文件是分离的。</td>
          <td>基于关系表的行存储</td>
        </tr>
        <tr>
          <td>数据维护</td>
          <td>更新操作并不会替换原来数据，而是生成一个新的版本数据。</td>
          <td>更新操作最新的当前值去替换记录中原来的旧值。</td>
        </tr>
        <tr>
          <td>可伸缩性</td>
          <td>容易通过在集群中增加或者减少硬件节点数量来实现性能的伸缩。</td>
          <td>较困难，需要使用中间件，并牺牲部分功能。</td>
        </tr>
        <tr>
          <td>数据索引</td>
          <td>只能通过行建索引，实现数据快速定位访问。</td>
          <td>可以针对不同列建立多个索引，以提高数据访问性能。</td>
        </tr>
      </tbody>
    </table>
    <h3 id="四hbase数据模型">四、HBASE数据模型</h3>
    <ol>
      <li>表：HBase采用表来组织数据，表由行和列组成，列划分为若干个列族。</li>
      <li>行：每个HBase表都由若干行组成，每个行由行键（row key）来标识。</li>
      <li>列族：一个HBase表被分组成许多列族（Column Family）的集合，它是基本的访问控制单元。</li>
      <li>列限定符：列族里的数据通过列限定符（或列）来定位</li>
      <li>单元格：在HBase表中，通过行、列族和列限定符确定一个单元格（cell），单元格中存储的数据没有数据类型，总被是为字节数组<code>byte[]</code>。</li>
      <li>时间戳：每个单元格都保存着同一份数据的多个版本，这些版本采用时间戳进行索引。</li>
    </ol>
    <h3 id="五hbase表物理存储">五、HBASE表物理存储</h3>
    <ul>
      <li>
        <p>Table所有行都按照row key的字典序排列。</p>
      </li>
      <li>
        <p>Table在行的方向上分割为多个 #区域 （ #Region ）。</p>
      </li>
      <li>
        <p>Region按大小分割，每个表开始只有一个region，随着数据增多，region不断增大，当增大到一个阈值时，region就会等分为两个新的region，之后会有越来越多的region。</p>
      </li>
      <li>
        <p>region是Hbase中分布式存储和负载均衡的最小单元，不同region分布到不同regionServer上。</p>
      </li>
      <li>
        <p>Region由一个或多个 #存储单元 #Store 组成，每个store保存一个列族columns family。每个store又由一个内存单元memStore和0至多个（[0,
          n]）个StoreFile组成。StoreFile以HFile格式保存在HDFS上。</p>
      </li>
      <li>
        <p><a href="https://hbase.org.cn/docs/237.html">Hfile格式</a></p>
      </li>
      <li>
        <p>HBASE表物理存储结构</p>
      </li>
    </ul>
    <p><img src="../img/15_HBASE%E8%A1%A8%E7%89%A9%E7%90%86%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84.png" alt="HBASE表物理存储结构">
    </p>
    <h3 id="六hbase系统组成">六、HBASE系统组成</h3>
    <ol>
      <li>
        <p>Hbase数据库系统由主服务器（Master）、区域服务器（Region Server）、协调者服务器（ZooKeeper）构成一个分布式数据库服务器集群。在架构层面上，一般有1个Master和多个Region
          Server。Hbase是一个分布式的数据库，使用ZooKeeper来管理服务器集群。Hbase需要运行在HDFS之上，由HDFS提供基础的文件存储。Hbase提供外部访问数据的API，实现对数据库操作访问。</p>
        <p><img src="../img/16_HBASE%E7%B3%BB%E7%BB%9F%E7%BB%84%E6%88%90.png" alt="HBASE系统组成"></p>
      </li>
      <li>
        <p>主服务器（Master）</p>
        <ul>
          <li>监控管理区域服务器</li>
          <li>处理区域服务器故障转移</li>
          <li>管理数据库元数据</li>
          <li>负责分配Region给区域服务器</li>
          <li>进行数据均衡分布</li>
          <li>通过ZooKeeper发布自己的位置给客户端</li>
        </ul>
      </li>
      <li>
        <p>区域服务器（Region Server）</p>
        <ul>
          <li>处理客户端读写访问请求，直接为用户提供数据服务</li>
          <li>负责维护区域的合并与分割</li>
          <li>负责刷新缓存到HDFS文件</li>
          <li>维护HLog数据</li>
        </ul>
      </li>
      <li>
        <p>协调者（ZooKeeper）</p>
        <ul>
          <li>实现分布式集群系统的并发控制</li>
          <li>通过选举集群的master服务器</li>
          <li>负责Region和区域服务器的注册</li>
          <li>解决分布式环境下数据一致性、有序性、持久性，配置数据同步</li>
        </ul>
      </li>
      <li>
        <p>客户端（Client）</p>
        <ul>
          <li>通过API向Hbase发起访问请求</li>
          <li>与Master进行通信进行管理类操作</li>
          <li>与Region Server进行数据读写类操作</li>
        </ul>
      </li>
    </ol>
    <h3 id="七hbase的系统架构">七、HBASE的系统架构</h3>
    <p><img src="../img/17_HBASE%E7%9A%84%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84.png" alt="HBASE的系统架构"></p>
    <h3 id="八hbase数据库的应用场景">八、HBASE数据库的应用场景</h3>
    <ul>
      <li>对象存储：用来存储头条类、新闻类的新闻、网页、图片等应用数据，包括存储病毒公司的病毒库等。</li>
      <li>推荐画像：用户的画像是比较大的稀疏矩阵，适合用HBase表来进行存储。</li>
      <li>时空数据：如轨迹、气象网格之类数据，滴滴打车的轨迹数据，大数据量的车联网企业等数据都存在HBase中。</li>
      <li>消息/订单：在电信领域、银行领域，很多订单查询底层的存储，这些通信、消息同步的应用构建在HBase之上。</li>
    </ul>
    <h2 id="73-键值对数据库原理">7.3 键值对数据库原理</h2>
    <ol>
      <li>
        <p>键值数据库 （Key-Value Database）是一种按照键值数据表结构组织存储数据的内存数据库。</p>
        <p><img
            src="../img/18_%E9%94%AE%E5%80%BC%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.png"
            alt="键值对数据库基本概念"></p>
      </li>
      <li>
        <p>键值数据库的数据模型</p>
        <ul>
          <li>数据结构：键值模型（Key-Value模型），每行记录由键和值两个部分组成，值可以是各种类型的数据</li>
          <li>数据操作：<code>Get(key), Set(key, value), Delete(key)</code>等</li>
          <li>数据完整性：针对单个键的操作才区别一致性</li>
        </ul>
      </li>
      <li>
        <p>键值数据库优缺点</p>
        <ul>
          <li>主要是在内存进行读写，其数据访问速度快</li>
          <li>数据结构简单，容易实现高效计算</li>
          <li>支持分布式处理，具备大数据处理能力</li>
          <li>对多值查找功能弱，难以处理关联查询</li>
          <li>缺少强制的数据约束，需应用程序进行处理</li>
        </ul>
      </li>
      <li>
        <p>Redis （Remote Dictionary Server）是一种基于内存组织、存储与管理数据的开源键值数据库。</p>
        <ul>
          <li>Redis支持数据的持久化，可以将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用。</li>
          <li>Redis不仅仅支持简单的key-value数据结构，同时还提供list、set、hash等数据结构。</li>
          <li>Redis支持数据的备份，即master-slave模式的数据备份。</li>
        </ul>
      </li>
      <li>
        <p>Redis数据库支持的数据类型</p>
        <ul>
          <li>字符串，最长为512MB</li>
          <li>哈希表，最多<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML">
                  <semantics>
                    <mrow>
                      <msup>
                        <mn>2</mn>
                        <mn>32</mn>
                      </msup>
                      <mo>−</mo>
                      <mn>1</mn>
                    </mrow>
                    <annotation encoding="application/x-tex">2^{32}-1</annotation>
                  </semantics>
                </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                    style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span
                      class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span
                            class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span
                                class="pstrut" style="height:2.7em;"></span><span
                                class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span
                                    class="mord mtight">32</span></span></span></span></span></span></span></span></span><span
                    class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace"
                    style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut"
                    style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>个键值对</li>
          <li>链表，支持双向遍历</li>
          <li>无序集合，去重的元素集合，最多<span class="katex"><span class="katex-mathml"><math
                  xmlns="http://www.w3.org/1998/Math/MathML">
                  <semantics>
                    <mrow>
                      <msup>
                        <mn>2</mn>
                        <mn>32</mn>
                      </msup>
                      <mo>−</mo>
                      <mn>1</mn>
                    </mrow>
                    <annotation encoding="application/x-tex">2^{32}-1</annotation>
                  </semantics>
                </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                    style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span
                      class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span
                            class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span
                                class="pstrut" style="height:2.7em;"></span><span
                                class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span
                                    class="mord mtight">32</span></span></span></span></span></span></span></span></span><span
                    class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace"
                    style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut"
                    style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>个元素</li>
          <li>有序集合，去重的元素集合，最多<span class="katex"><span class="katex-mathml"><math
                  xmlns="http://www.w3.org/1998/Math/MathML">
                  <semantics>
                    <mrow>
                      <msup>
                        <mn>2</mn>
                        <mn>32</mn>
                      </msup>
                      <mo>−</mo>
                      <mn>1</mn>
                    </mrow>
                    <annotation encoding="application/x-tex">2^{32}-1</annotation>
                  </semantics>
                </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                    style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span
                      class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span
                            class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span
                                class="pstrut" style="height:2.7em;"></span><span
                                class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span
                                    class="mord mtight">32</span></span></span></span></span></span></span></span></span><span
                    class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace"
                    style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut"
                    style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>个元素</li>
        </ul>
      </li>
      <li>
        <p>Redis数据库技术特点</p>
        <ul>
          <li>Redis将键值存储在主存中，快速读写</li>
          <li>Redis支持主从复制，数据读在从节点（slave）数据库中完成，数据写入在主节点（master）数据库中完成</li>
          <li>Redis使用RAM作为内存式存储，用磁盘保存数据</li>
          <li>Redis支持创建发布和订阅通道</li>
          <li>Redis将内存中的数据定期保存到文件系统中，用于故障恢复</li>
          <li>Redis有丰富的SDK支持，所有Redis操作都是原子的</li>
        </ul>
      </li>
      <li>
        <p>内存数据库与磁盘数据库比较</p>
        <ol>
          <li>磁盘数据库典型代表：MySQL、MSSQL
            <ul>
              <li>机制成熟可靠；</li>
              <li>提供强大的数据定义语言及数据操作语言，提供SQL支持；</li>
              <li>提供一定的主动机制（如触发器）和后台数据处理能力（如存储过程）</li>
              <li>占用、消耗的系统资源较多；</li>
              <li>数据存取的速度慢；</li>
              <li>数据存取时间不一致且难以预测。</li>
            </ul>
          </li>
          <li>内存数据库典型代表：Redis、Memcached
            <ul>
              <li>存取速度快速、一致，消除I/O瓶颈</li>
              <li>存取时间易于预测</li>
              <li>易于定制数据存取方式</li>
              <li>对系统的故障恢复要求高</li>
              <li>通用性不强，对数据库的访问要求及访问方式不同</li>
            </ul>
          </li>
        </ol>
      </li>
    </ol>
    <h2 id="74-文档型数据库原理">7.4 文档型数据库原理</h2>
    <ol>
      <li>
        <p>文档 是组织与处理信息的基本单位。 #文档数据库 区别于传统的其它数据库，它是用来管理文档的。</p>
        <ul>
          <li>存储方式：没有表结构或表结构可变</li>
          <li>可以进行复杂的查询条件</li>
          <li>文档其实是一个数据记录，能够对包含的数据类型和内容进行“自我描述”</li>
          <li>文档数据是用于存储、检索和管理面向文档和半结构化的数据。文档包括XML、YAML、JSON和BSON，还有二进制格式（诸如PDF和MS office文档）。</li>
        </ul>
      </li>
      <li>
        <p>MongoDB 是一种开源的分布式文档存储数据库系统。</p>
        <p><img src="../img/19_MongoDB%E6%95%B0%E6%8D%AE%E5%BA%93.png" alt="MongoDB数据库">
        </p>
      </li>
      <li>
        <p>关系数据库与MongoDB对比</p>
        <p><img src="../img/20_%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8EMongoDB%E5%AF%B9%E6%AF%94.png"
            alt="关系数据库与MongoDB对比"></p>
      </li>
      <li>
        <p>MongoDB数据存储</p>
        <ol>
          <li>JSON格式数据存储：JSON数据格式与语言无关，脱胎于JavaScript，但目前编程语言都支持JSON格式数据的生成和解析。</li>
          <li>BSON格式数据存储：BSON是MongoDB的数据存储格式。BSON基于JSON格式，选择JSON进行改造的原因主要是JSON的通用性及JSON的schemaless特性。
            <ul>
              <li><code>db.meeting.insert({meeting:&quot;M1 June&quot;,Date:&quot;2018-01-06&quot;});</code></li>
            </ul>
          </li>
        </ol>
      </li>
      <li>
        <p>MongoDB数据库特点</p>
        <ul>
          <li>JSON文档模型</li>
          <li>动态的数据模式</li>
          <li>二级索引强大</li>
          <li>查询功能</li>
          <li>自动分片</li>
          <li>水平扩展</li>
          <li>自动复制</li>
          <li>文本搜索</li>
          <li>企业级安全</li>
          <li>聚合框架MapReduce</li>
          <li>大文件存储GridFS</li>
        </ul>
      </li>
    </ol>
    <h2 id="75-图形数据库原理">7.5 图形数据库原理</h2>
    <ol>
      <li>
        <p>图形数据库 是一种应用图形理论存储实体之间关系信息的NoSQL数据库，它是以图这种数据结构存储和查询数据的。</p>
      </li>
      <li>
        <p>图数据模型：实现图的数据结构有两种方式：[[5.1.1 图的基本概念#^d9472c|领接表]]、领接矩阵。</p>
      </li>
      <li>
        <p>关系数据库与图形数据库比较</p>
        <p><img
            src="../img/21_%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E5%9B%BE%E5%BD%A2%E6%95%B0%E6%8D%AE%E5%BA%93%E6%AF%94%E8%BE%83.png"
            alt="关系数据库与图形数据库比较"></p>
      </li>
      <li>
        <p>Neo4J 是一个有商业支持的开源图形数据库，它用高效的图形数据结构代替传统的表设计。它具备完整的ACID支持、高可用性、能够轻易扩展到上亿级别的节点和关系、能够通过遍历工具高速检索数据。</p>
      </li>
      <li>
        <p>Neo4J数据模型：实体、关系、标签（Lable）、属性和遍历等。</p>
      </li>
      <li>
        <p>Neo4J特点</p>
        <ul>
          <li>因其嵌入式、高性能、轻量级等优势，越来越受到关注。</li>
          <li>图形数据结构，在一个图中包含两种基本的数据类型：Nodes（节点）和Relatoinships（关系）。</li>
          <li>Nodes和Relatoinships包含key-value形式的属性。</li>
          <li>Nodes通过Relatoinships所定义的关系相连起来，形成关系型网络结构。</li>
        </ul>
      </li>
    </ol>

    <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
  </div>
</body>

</html>